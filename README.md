# è­¦å‘Šï¼ï¼ï¼æœ¬é¡¹ç›®æ‰€æœ‰ä»£ç å…¨éƒ¨ç”±AIç¼–å†™

# OneBot Manager æœºå™¨äººç®¡ç†å™¨

<div align="center">

![OneBot Manager](https://img.shields.io/badge/OneBot-Manager-blue?style=for-the-badge&logo=robot)
![Version](https://img.shields.io/badge/version-2.0.0-green?style=for-the-badge)
![Node.js](https://img.shields.io/badge/Node.js-18+-brightgreen?style=for-the-badge&logo=node.js)
![License](https://img.shields.io/badge/license-MIT-orange?style=for-the-badge)

**ç°ä»£åŒ–çš„ OneBot æœºå™¨äººç®¡ç† WebUI**

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢
[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢
[APIæ–‡æ¡£](docs/API.md) â€¢
[å¼€å‘æŒ‡å—](#%EF%B8%8F-å¼€å‘æŒ‡å—)

</div>

## ğŸ“– é¡¹ç›®ç®€ä»‹

OneBot Manager æ˜¯ä¸€ä¸ªåŸºäº Web çš„ QQ æœºå™¨äººç®¡ç†å¹³å°ï¼Œä¸“ä¸º Lagrange.OneBot è®¾è®¡ã€‚å®ƒæä¾›äº†ç›´è§‚çš„ Web ç•Œé¢æ¥ç®¡ç†å¤šä¸ªæœºå™¨äººå®ä¾‹ï¼ŒåŒ…æ‹¬å¯åŠ¨ã€åœæ­¢ã€é…ç½®ã€æ—¥å¿—æŸ¥çœ‹ç­‰åŠŸèƒ½ï¼Œè®©æœºå™¨äººç®¡ç†å˜å¾—ç®€å•é«˜æ•ˆã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¤– æœºå™¨äººç®¡ç†
- **å¤šæœºå™¨äººæ”¯æŒ** - åŒæ—¶ç®¡ç†å¤šä¸ªæœºå™¨äººå®ä¾‹
- **ä¸€é”®æ“ä½œ** - å¯åŠ¨ã€åœæ­¢ã€é‡å¯æœºå™¨äºº
- **çŠ¶æ€ç›‘æ§** - å®æ—¶æ˜¾ç¤ºæœºå™¨äººè¿è¡ŒçŠ¶æ€å’Œåœ¨çº¿çŠ¶æ€
- **è‡ªåŠ¨é‡å¯** - æ”¯æŒæ•…éšœè‡ªåŠ¨é‡å¯å’Œå®šæ—¶é‡å¯
- **è¿›ç¨‹ç®¡ç†** - æ™ºèƒ½è¿›ç¨‹ç›‘æ§å’Œæ¸…ç†

### ğŸ“± äºŒç»´ç ç™»å½•
- **è‡ªåŠ¨æ£€æµ‹** - è‡ªåŠ¨å‘ç°å’Œæ˜¾ç¤ºç™»å½•äºŒç»´ç 
- **æ‰«ç ç™»å½•** - æ”¯æŒ QQ/TIM æ‰«ç ç™»å½•
- **ç™»å½•çŠ¶æ€** - å®æ—¶æ˜¾ç¤ºç™»å½•å’Œåœ¨çº¿çŠ¶æ€
- **è‡ªåŠ¨æ¸…ç†** - ç™»å½•æˆåŠŸåè‡ªåŠ¨æ¸…ç†äºŒç»´ç æ–‡ä»¶

### âš™ï¸ é…ç½®ç®¡ç†
- **ç®€åŒ–é…ç½®** - æä¾›ç”¨æˆ·å‹å¥½çš„é…ç½®ç•Œé¢
- **é«˜çº§é…ç½®** - æ”¯æŒå®Œæ•´çš„ OneBot é…ç½®é€‰é¡¹
- **åŸå§‹é…ç½®** - ç›´æ¥ç¼–è¾‘ JSON é…ç½®æ–‡ä»¶
- **é…ç½®éªŒè¯** - è‡ªåŠ¨éªŒè¯é…ç½®æ ¼å¼å’Œå†…å®¹

### ğŸ“Š æ—¥å¿—ç³»ç»Ÿ
- **å®æ—¶æ—¥å¿—** - å®æ—¶æ˜¾ç¤ºæœºå™¨äººè¿è¡Œæ—¥å¿—
- **å†å²æ—¥å¿—** - ä¿å­˜å’ŒæŸ¥çœ‹å†å²æ—¥å¿—è®°å½•
- **æ—¥å¿—è¿‡æ»¤** - æ™ºèƒ½è¿‡æ»¤æ— å…³æ—¥å¿—ä¿¡æ¯
- **æ—¥å¿—ç®¡ç†** - æ”¯æŒæ¸…ç©ºå’Œä¸‹è½½æ—¥å¿—

### ğŸŒ Web ç•Œé¢
- **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **ç°ä»£åŒ–UI** - åŸºäº Vue.js 3 çš„ç°ä»£åŒ–ç•Œé¢
- **å®æ—¶æ›´æ–°** - åŸºäº WebSocket çš„å®æ—¶çŠ¶æ€æ›´æ–°
- **ç”¨æˆ·è®¤è¯** - åŸºäº API Key çš„å®‰å…¨è®¤è¯

### ğŸ”§ ç³»ç»Ÿç®¡ç†
- **è‡ªåŠ¨å®‰è£…** - è‡ªåŠ¨ä¸‹è½½å’Œå®‰è£… Lagrange.OneBot
- **ç³»ç»Ÿè®¾ç½®** - å®Œæ•´çš„ç³»ç»Ÿé…ç½®ç®¡ç†
- **å®šæ—¶ä»»åŠ¡** - æ”¯æŒå®šæ—¶é‡å¯å’Œç»´æŠ¤ä»»åŠ¡
- **èµ„æºç›‘æ§** - ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µç›‘æ§

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js** 18.0+ 
- **npm** æˆ– **yarn**
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, Linux, macOS

### å®‰è£…éƒ¨ç½²

#### 1. ä¸‹è½½é¡¹ç›®
```bash
git clone https://github.com/xhzngm/onebot-manager.git
cd onebot-manager
```

#### 2. å®‰è£…ä¾èµ–
```bash
npm install
# æˆ–
yarn install
```

#### 3. é¦–æ¬¡è¿è¡Œ

ç”±äºä¸Šæ¸¸ä»£ç [PR](https://github.com/LagrangeDev/Lagrange.Core/pull/863)ä¿®æ”¹æœªå®Œæˆåˆå¹¶ï¼Œå¯¼è‡´æ— æ³•æ­£å¸¸å¯åŠ¨è¯·å‰å¾€[releases](https://github.com/xhzngm/onebot-manager/releases)ä¸‹è½½ç¼–è¯‘å¥½çš„Lagrange.OneBotä¸»ç¨‹åº publish.xxxx

```bash
noed .
```

#### 4. è®¿é—®ç®¡ç†ç•Œé¢
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:12345`

é¦–æ¬¡å¯åŠ¨ä¼šè¿›å…¥é…ç½®å‘å¯¼ï¼ŒæŒ‰ç…§æç¤ºå®Œæˆåˆå§‹é…ç½®ã€‚

### Docker éƒ¨ç½²

```bash
# æ‹‰å–é•œåƒ
docker pull maimai977/onebot-manager

# è¿è¡Œå®¹å™¨
docker run -d \
  --name onebot-manager \
  --network host \          # ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œï¼Œè‡ªåŠ¨å¼€æ”¾æ‰€æœ‰ç«¯å£
  -v $(pwd):/app/host \
  -v ./data:/app/onebot \
  -v ./logs:/app/logs \
  maimai977/onebot-manager:latest

```

## ğŸ“š ç›®å½•ç»“æ„

```
onebot-manager/
â”œâ”€â”€ server.js              # ä¸»æœåŠ¡å™¨æ–‡ä»¶
â”œâ”€â”€ config.json            # ç³»ç»Ÿé…ç½®æ–‡ä»¶
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ modules/                # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ BotManager.js      # æœºå™¨äººç®¡ç†å™¨
â”‚   â”œâ”€â”€ ProcessManager.js  # è¿›ç¨‹ç®¡ç†å™¨
â”‚   â”œâ”€â”€ ApiRoutes.js       # API è·¯ç”±
â”‚   â””â”€â”€ LagrangeInstaller.js # Lagrange å®‰è£…å™¨
â”œâ”€â”€ public/                 # Web å‰ç«¯æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ app.js             # å‰ç«¯åº”ç”¨é€»è¾‘
â”‚   â””â”€â”€ style.css          # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ onebot/                 # æœºå™¨äººæ•°æ®ç›®å½•
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â””â”€â”€ docs/                   # æ–‡æ¡£ç›®å½•
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç³»ç»Ÿé…ç½® (config.json)

```json
{
  "server": {
    "port": 12345,
    "host": "0.0.0.0",
    "apiKey": "your-api-key"
  },
  "bot": {
    "checkInterval": 3000,
    "qrCodeCheckInterval": 3000,
    "maxRestartAttempts": 3,
    "autoRestart": true
  },
  "scheduler": {
    "autoRestartAll": true,
    "autoRestartTime": "03:00"
  }
}
```

### æœºå™¨äººé…ç½®

æ¯ä¸ªæœºå™¨äººéƒ½æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒï¼š
- è´¦å·è®¾ç½®ï¼ˆQQå·ã€åè®®ç±»å‹ï¼‰
- è¿æ¥é…ç½®ï¼ˆæ­£å‘/åå‘ WebSocketã€HTTPï¼‰
- æ—¥å¿—é…ç½®
- ç­¾åæœåŠ¡å™¨é…ç½®

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®æ¶æ„

- **server.js** - ä¸»æœåŠ¡å™¨ï¼Œå¤„ç†HTTP/WebSocketè¯·æ±‚
- **BotManager** - æ ¸å¿ƒæœºå™¨äººç®¡ç†é€»è¾‘
- **ProcessManager** - è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **ApiRoutes** - RESTful API æ¥å£
- **LagrangeInstaller** - è‡ªåŠ¨ä¸‹è½½å®‰è£…å™¨

### æœ¬åœ°å¼€å‘

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆè‡ªåŠ¨é‡è½½ï¼‰
npm run dev

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ ¼å¼åŒ–
npm run lint
```

### API æ¥å£

è¯¦ç»†çš„ API æ–‡æ¡£è¯·å‚è€ƒ [API.md](./docs/API.md)

ä¸»è¦æ¥å£ï¼š
- `POST /api/login` - ç”¨æˆ·ç™»å½•
- `GET /api/bots` - è·å–æœºå™¨äººåˆ—è¡¨
- `POST /api/bots` - åˆ›å»ºæœºå™¨äºº
- `POST /api/bots/:id/start` - å¯åŠ¨æœºå™¨äºº
- `POST /api/bots/:id/stop` - åœæ­¢æœºå™¨äºº

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£å ç”¨**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   netstat -ano | findstr :12345
   # ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
   ```

2. **æƒé™é—®é¢˜**
   ```bash
   # ç¡®ä¿æœ‰æ‰§è¡Œæƒé™
   chmod +x Lagrange.OneBot
   ```

3. **ç½‘ç»œé—®é¢˜**
   ```bash
   # æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   sudo ufw allow 12345
   ```

### æ—¥å¿—è°ƒè¯•

- æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ï¼š`./logs/system.log`
- æŸ¥çœ‹æœºå™¨äººæ—¥å¿—ï¼š`./logs/bots/{botId}.log`
- å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ `DEBUG=true`

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ æ”¯æŒä¸åé¦ˆ

- **Issues**: [GitHub Issues](https://github.com/xhzngm/onebot-manager/issues)
- **QQç¾¤**: [1030501081](https://qm.qq.com/q/leCEnTswTY)

## ğŸ‰ è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®ï¼š

- [Lagrange.Core](https://github.com/LagrangeDev/Lagrange.Core) - æ ¸å¿ƒ OneBot å®ç°
- [OneBot](https://onebot.dev/) - èŠå¤©æœºå™¨äººåº”ç”¨æ¥å£æ ‡å‡†
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Express.js](https://expressjs.com/) - å¿«é€Ÿã€å¼€æ”¾ã€æç®€çš„ Web æ¡†æ¶

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼â­**

Made with â¤ï¸ by OneBot Manager Team

</div>
